record:
  use: invenio
  module:
    qualified: records2
  permissions:
    presets: [ 'everyone' ]
  files:
    properties:
      file_title: keyword
  record:
    imports:
      - import: oarepo_runtime.cf.CustomFields
      - import: invenio_records_resources.records.api.Record
        alias: InvenioRecord
      - import: invenio_records_resources.records.dumpers.CustomFieldsDumperExt
    extra-code: |-2
          # extra custom fields for testing ICU sorting and suggesting
          sort = CustomFields(
              "RUNTIME_TEST_SORT_CF",
              "sort",
              clear_none=True,
              create_if_missing=True,
          )
          suggest = CustomFields(
              "RUNTIME_TEST_SUGGEST_CF",
              "suggest",
              clear_none=True,
              create_if_missing=True,
          )
  search-options:
    base-classes:
      - I18nSearchOptions
    imports:
      - import: oarepo_runtime.services.search.I18nSearchOptions
    sort-options-field: extra_sort_options
    extra-code: |-2
          SORT_CUSTOM_FIELD_NAME = "RUNTIME_TEST_SORT_CF"
          SUGGEST_CUSTOM_FIELD_NAME = "RUNTIME_TEST_SUGGEST_CF"

  record-dumper:
    extensions:
      - CustomFieldsDumperExt("RUNTIME_TEST_SORT_CF", "sort")
      - CustomFieldsDumperExt("RUNTIME_TEST_SUGGEST_CF", "suggest")

  properties:
    metadata:
     properties:
      title: keyword
